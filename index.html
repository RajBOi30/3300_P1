<html>

<head>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    .gridlines line {
      stroke: #bbb;
    }

    .gridlines .domain {
      stroke: none;
    }
  </style>
</head>

<body>
  <h3>
    Graph 1: Visualizing the relationship between Pokemon Health and Damage.
  </h3>
  <svg id="graph1" height="700" width="1000" style="background:beige"></svg>
  <script>
    const svg = d3.select('svg#graph1');
    const margins = { top: 10, right: 10, bottom: 10, left: 10 };
    const chartWidth = svg.attr("width") - margins.right - margins.left;
    const chartHeight = svg.attr("height") - margins.top - margins.bottom;

    d3.csv('pokemon_data.csv').then(data => {
      console.log(data);

      const attackExtent = d3.extent(data, d => Number(d.attack));
      const hpExtent = d3.extent(data, d => Number(d.hp));

      const xScale = d3.scaleLinear().domain([attackExtent[0] - 10, attackExtent[1]]).range([0, chartWidth]);
      const yScale = d3.scaleLinear().domain([hpExtent[0], hpExtent[1] + 5]).range([chartHeight, 0]);

      let verticalAxis = d3.axisLeft(yScale);
      svg.append('g')
        .attr('transform', `translate(${margins.left + chartWidth / 2}, ${margins.top})`)
        .call(verticalAxis);

      let horizontalAxis = d3.axisBottom(xScale);
      svg.append('g')
        .attr('transform', `translate(${margins.left}, ${margins.top + chartHeight / 2})`)
        .call(horizontalAxis);

      data.forEach(d => {
        let x = xScale(d.attack);
        let y = yScale(d.hp);
        if (x > attackExtent[1]) {
          console.log(x);
        }
        svg.append("svg:image")
          .attr('x', x)
          .attr('y', y)
          .attr('width', 50)
          .attr('height', 50)
          .attr("xlink:href", "pokemon_svg/" + (d.name).toLowerCase() + ".svg")
      });
    });
  </script>
  <h3>
    Graph 2: Visualizing the relationship between quadrant and speed.
  </h3>
  <svg id="graph2" height="700" width="1000" style="background:beige"></svg>
  <script>
    const svg2 = d3.select("svg#graph2");
    const height2 = svg.attr("height");
    const width2 = svg.attr("width");
    const margins2 = { top: 10, right: 10, bottom: 50, left: 50 };
    const chartWidth2 = width2 - margins2.right - margins2.left;
    const chartHeight2 = height2 - margins2.top - margins2.bottom;
    const twoPi = Math.PI * 2;
    const percentage = 60
    const imageSize = 230

    // var pokeball = svg2.append('image')
    //   .attr('xlink:href', "pokeball.png")
    //   .attr('x', 250 - imageSize / 2)
    //   .attr('y', 250 - imageSize / 2)
    //   .attr('width', imageSize)
    //   .attr('height', imageSize);

    svg2.append("path")
      .attr("transform", "translate(250,250)")
      .attr("d", d3.arc()({
        innerRadius: 0,
        outerRadius: 100,
        startAngle: 0,
        endAngle: ((100 - percentage) / 100) * twoPi
      }))
      .attr("fill", "beige");

    for (let i = 0; i < 4; i++) {
      var pokeball = svg2.append('image')
        .attr('xlink:href', "pokeball.png")
        .attr('x', chartWidth2 / 4 * i)
        .attr('y', 350 - (imageSize / 2))
        .attr('width', imageSize)
        .attr('height', imageSize);
    }
  </script>


</body>

</html>